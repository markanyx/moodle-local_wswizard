define("local_wswizard/dash",["jquery","core/modal_factory","core/modal_events","core/ajax","core/notification","core/str"],(function($,ModalFactory,ModalEvents,Ajax,Notification,String){var trigger=$(".token_delete_button");ModalFactory.create({type:ModalFactory.types.SAVE_CANCEL,title:String.get_string("dashboard_delete_token_title","local_wswizard"),body:String.get_string("dashboard_delete_token_body","local_wswizard"),preShowCallback:function(triggerElement,modal){var tokenString=triggerElement[0].classList[0],tokenid=tokenString.substr(tokenString.lastIndexOf("tokenid")+"tokenid".length),tokenNameString=triggerElement[0].classList[1],tokenName=tokenNameString.substr(tokenNameString.lastIndexOf("tokenText")+"tokenText".length);console.log(tokenid),console.log(tokenName),modal.setBody(String.get_string("dashboard_delete_token_body","local_wswizard"),"WAHOOOO"),triggerElement=$(triggerElement),modal.params={tokenid:parseInt(tokenid)},modal.setSaveButtonText("Delete")},large:!0},trigger).done((function(modal){var wwwroot=M.cfg.wwwroot;modal.getRoot().on(ModalEvents.save,(function(e){e.preventDefault(),$.ajax({type:"POST",url:wwwroot+"/local/wswizard/ajax.php?action=deleteToken&id="+modal.params.tokenid,dataType:"json",success:function(resultData){window.location.reload()}})}))}))}));

//# sourceMappingURL=dash.min.js.map